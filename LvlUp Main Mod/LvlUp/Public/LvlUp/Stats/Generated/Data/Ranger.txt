// Spell_Projectile //

new entry "Projectile_DreadAmbusher_ExtraAttack"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_MainHandAttack"
data "SpellProperties" "GROUND:DealDamage(MainRangedWeapon, MainRangedWeaponDamageType);GROUND:ExecuteWeaponFunctors(MainHand);ApplyStatus(SELF,DREADAMBUSHER_EXTRAATTACKUSED,100,-1);RemoveStatus(SELF,DREADAMBUSHER_EXTRAATTACKSPELLS)"
data "SpellSuccess" "DealDamage(max(1,MainRangedWeapon)+1d8, MainRangedWeaponDamageType); ExecuteWeaponFunctors(MainHand)"
data "DisplayName" "Dread Ambusher - Extra Attack (Ranged)"
data "Description" "After taking the Attack action on that turn, you can make one additional weapon attack. If that attack hits, the target takes an extra 1d8 damage of the weapon's damage type."
data "TooltipDamageList" "DealDamage(MainRangedWeapon+1d8, MainRangedWeaponDamageType)"
data "UseCosts" ""
data "SpellFlags" "HasHighGroundRangeExtension;RangeIgnoreVerticalThreshold;IsHarmful"

new entry "Projectile_EnsnaringStrike_Recast"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_EnsnaringStrike"
data "SpellContainerID" ""
data "SpellSuccess" "RemoveStatus(SELF,ENSNARINGSTRIKE_RECAST);IF(not SavingThrow(Ability.Strength, SourceSpellDC(),AdvantageOnRestrained(),DisadvantageOnRestrained())):ApplyStatus(ENSNARING_STRIKE,100,10);DealDamage(MainRangedWeapon, MainRangedWeaponDamageType); ExecuteWeaponFunctors(MainHand)"
data "SpellFail" ""
data "DisplayName" "Ensnaring Strike (Ranged) Recast"
data "UseCosts" "ActionPoint:1"
data "SpellFlags" "HasVerbalComponent;IsSpell;HasHighGroundRangeExtension;RangeIgnoreVerticalThreshold;IsHarmful"

new entry "Projectile_EnsnaringStrike_Recast_2"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_EnsnaringStrike_Recast"
data "SpellSuccess" "RemoveStatus(SELF,ENSNARINGSTRIKE_RECAST_2);IF(not SavingThrow(Ability.Strength, SourceSpellDC(),AdvantageOnRestrained(),DisadvantageOnRestrained())):ApplyStatus(ENSNARING_STRIKE_2,100,10);DealDamage(MainRangedWeapon, MainRangedWeaponDamageType); ExecuteWeaponFunctors(MainHand)"

new entry "Projectile_EnsnaringStrike_Recast_3"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_EnsnaringStrike_Recast"
data "SpellSuccess" "RemoveStatus(SELF,ENSNARINGSTRIKE_RECAST_3);IF(not SavingThrow(Ability.Strength, SourceSpellDC(),AdvantageOnRestrained(),DisadvantageOnRestrained())):ApplyStatus(ENSNARING_STRIKE_3,100,10);DealDamage(MainRangedWeapon, MainRangedWeaponDamageType); ExecuteWeaponFunctors(MainHand)"

new entry "Projectile_EnsnaringStrike_Recast_4"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_EnsnaringStrike_Recast"
data "SpellSuccess" "RemoveStatus(SELF,ENSNARINGSTRIKE_RECAST_4);IF(not SavingThrow(Ability.Strength, SourceSpellDC(),AdvantageOnRestrained(),DisadvantageOnRestrained())):ApplyStatus(ENSNARING_STRIKE_4,100,10);DealDamage(MainRangedWeapon, MainRangedWeaponDamageType); ExecuteWeaponFunctors(MainHand)"

new entry "Projectile_EnsnaringStrike_Recast_5"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_EnsnaringStrike_Recast"
data "SpellSuccess" "RemoveStatus(SELF,ENSNARINGSTRIKE_RECAST_5);IF(not SavingThrow(Ability.Strength, SourceSpellDC(),AdvantageOnRestrained(),DisadvantageOnRestrained())):ApplyStatus(ENSNARING_STRIKE_5,100,10);DealDamage(MainRangedWeapon, MainRangedWeaponDamageType); ExecuteWeaponFunctors(MainHand)"

new entry "Projectile_Smite_Branding"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_MainHandAttack"
data "SpellContainerID" "Target_Smite_Branding"
data "Level" "2"
data "SpellSchool" "Evocation"
data "SpellRoll" "Attack(AttackType.RangedWeaponAttack)"
data "SpellSuccess" "DealDamage(max(1,MainRangedWeapon), MainRangedWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(2d6,Radiant); ApplyStatus(BRANDING_SMITE, 100, 10)"
data "SpellFail" "ApplyStatus(SELF,BRANDINGSTRIKE_RECAST,100,10)"
data "Icon" "PassiveAction_WardingFlare"
data "DisplayName" "Branding Smite"
data "Description" "Your weapon gleams with astral radiance. It deals an extra [1] to the target, which becomes visible if it's Invisible. The target also sheds dim light and can't become Invisible until the spell ends."
data "DescriptionParams" "DealDamage(2d6,Radiant)"
data "CastTextEvent" "Cast"
data "AlternativeCastTextEvents" ""
data "UseCosts" "ActionPoint:1;SpellSlot:1:1:2"
data "SpellAnimation" "73afb4e5-8cfe-4479-95cf-16889597fee3(CMBT_Range_RHand_01_Prepare),,;9583ecee-cf6c-4735-86db-7ebf1df15eae(CMBT_Skill_Precision_01_Antic),,;de006e3f-70fb-4eb7-a98d-d845d15b20e8(CMBT_Skill_Precision_01_Attack),,;50696db7-d931-4734-915d-32d038ba99a5(CMBT_Skill_Precision_01_Recover),,;6ec808e1-e128-44ef-9361-a713bf86de8f(CMBT_Range_RHand_01_Loop),,;,,;f920a0a6-f257-4ce4-8d17-2dcaa7bb7bbb(CMBT_Range_RHand_01_Cancel),,;,,;,,"
data "VerbalIntent" "Damage"
data "SpellFlags" "IsSpell;HasVerbalComponent;IsConcentration;IsHarmful"
data "SpellHitAnimationType" "MagicalDamage_External"
data "MemoryCost" "1"
data "PrepareEffect" "67770f05-890a-4b11-8a80-d60079041ab7"
data "CastEffect" "17fb1fe6-7dd9-4ce9-a7a3-d46453d26398"
data "TargetEffect" "b94fcfde-d824-4e7d-b9c5-833a50b66537"

new entry "Projectile_Smite_Branding_Recast"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_Smite_Branding"
data "SpellContainerID" ""
data "DisplayName" "Branding Smite (Recast)"
data "SpellSuccess" "RemoveStatus(SELF,BRANDINGSTRIKE_RECAST); DealDamage(max(1,MainRangedWeapon), MainRangedWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(2d6,Radiant); ApplyStatus(BRANDING_SMITE, 100, 10)"
data "SpellFail" ""
data "UseCosts" "ActionPoint:1"
data "SpellFlags" "IsSpell;CannotTargetTerrain;IsHarmful"

new entry "Projectile_Smite_Branding_3"
type "SpellData"
data "SpellType" "Projectile"
using "Target_Smite_Branding_Melee"
data "SpellSuccess" "DealDamage(max(1,MainRangedWeapon), MainRangedWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(3d6,Radiant); ApplyStatus(BRANDING_SMITE, 100, 10)"
data "SpellFail" "ApplyStatus(SELF,BRANDINGSTRIKE_RECAST_3,100,10)"
data "DescriptionParams" "DealDamage(3d6,Radiant)"
data "UseCosts" "ActionPoint:1;SpellSlot:1:1:3"
data "RootSpellID" "Projectile_Smite_Branding"
data "PowerLevel" "3"

new entry "Projectile_Smite_Branding_Recast_3"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_Smite_Branding_Recast"
data "SpellSuccess" "RemoveStatus(SELF,BRANDINGSTRIKE_RECAST_3); DealDamage(max(1,MainRangedWeapon), MainRangedWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(3d6,Radiant); ApplyStatus(BRANDING_SMITE, 100, 10)"

new entry "Projectile_Smite_Branding_4"
type "SpellData"
data "SpellType" "Projectile"
using "Target_Smite_Branding_Melee"
data "SpellSuccess" "DealDamage(max(1,MainRangedWeapon), MainRangedWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(4d6,Radiant); ApplyStatus(BRANDING_SMITE, 100, 10)"
data "SpellFail" "ApplyStatus(SELF,BRANDINGSTRIKE_RECAST_4,100,10)"
data "DescriptionParams" "DealDamage(4d6,Radiant)"
data "UseCosts" "ActionPoint:1;SpellSlot:1:1:4"
data "RootSpellID" "Projectile_Smite_Branding"
data "PowerLevel" "4"

new entry "Projectile_Smite_Branding_Recast_4"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_Smite_Branding_Recast"
data "SpellSuccess" "RemoveStatus(SELF,BRANDINGSTRIKE_RECAST_4); DealDamage(max(1,MainRangedWeapon), MainRangedWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(4d6,Radiant); ApplyStatus(BRANDING_SMITE, 100, 10)"

new entry "Projectile_Smite_Branding_5"
type "SpellData"
data "SpellType" "Projectile"
using "Target_Smite_Branding_Melee"
data "SpellSuccess" "DealDamage(max(1,MainRangedWeapon), MainRangedWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(5d6,Radiant); ApplyStatus(BRANDING_SMITE, 100, 10)"
data "SpellFail" "ApplyStatus(SELF,BRANDINGSTRIKE_RECAST_5,100,10)"
data "DescriptionParams" "DealDamage(5d6,Radiant)"
data "UseCosts" "ActionPoint:1;SpellSlot:1:1:5"
data "RootSpellID" "Projectile_Smite_Branding"
data "PowerLevel" "5"

new entry "Projectile_Smite_Branding_Recast_5"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_Smite_Branding_Recast"
data "SpellSuccess" "RemoveStatus(SELF,BRANDINGSTRIKE_RECAST_5); DealDamage(max(1,MainRangedWeapon), MainRangedWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(5d6,Radiant); ApplyStatus(BRANDING_SMITE, 100, 10)"

// Spell_Shout //

new entry "Shout_RemoveWrathfulSmite"
type "SpellData"
data "SpellType" "Shout"
data "SpellProperties" "RemoveStatus(WRATHFUL_SMITE)"
data "TargetConditions" "Self()"
data "Icon" "Status_Frightened"
data "DisplayName" "Wrathful Smite (Remove effect)"
data "Description" "As an action, the creature can make a Wisdom saving throw against your spell save DC to steel its resolve and end this spell"
data "CastTextEvent" "Cast"
data "UseCosts" "ActionPoint:1"
data "SpellAnimation" "dd86aa43-8189-4d9f-9a5c-454b5fe4a197(SPL_Arcane_Utility_01_Prepare),,;,,;4148823a-6dbc-4692-a8ff-71520315a10f(SPL_Somatic_Target_Mute_01_Cast),,;,,;cc5b0caf-3ed1-4711-a50d-11dc3f1fdc6a(SPL_Arcane_Utility_01_Loop),,;,,;1715b877-4512-472e-9bd0-fd568a112e90(SPL_Arcane_Utility_01_Cancel),,;,,;,,"
data "VerbalIntent" "Utility"
data "SpellFlags" "CannotTargetItems"

new entry "Shout_SpeakWithAnimals_PrimalAwareness"
type "SpellData"
data "SpellType" "Shout"
using "Shout_SpeakWithAnimals"
data "Cooldown" "OncePerRest"
data "DisplayName" "Speak with Animals (Primal Awareness)"
data "UseCosts" "ActionPoint:1"

// Spell_Target //

new entry "Target_DreadAmbusher_ExtraAttack"
type "SpellData"
data "SpellType" "Target"
using "Target_MainHandAttack"
data "SpellProperties" "GROUND:DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType);GROUND:ExecuteWeaponFunctors(MainHand);ApplyStatus(SELF,DREADAMBUSHER_EXTRAATTACKUSED,100,-1);RemoveStatus(SELF,DREADAMBUSHER_EXTRAATTACKSPELLS)"
data "SpellRoll" "Attack(AttackType.MeleeWeaponAttack)"
data "SpellSuccess" "DealDamage(max(1,MainMeleeWeapon)+1d8, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand)"
data "Icon" "Target_MainHandAttack"
data "DisplayName" "Dread Ambusher - Extra Attack (Melee)"
data "Description" "After taking the Attack action on that turn, you can make one additional weapon attack. If that attack hits, the target takes an extra 1d8 damage of the weapon's damage type."
data "TooltipDamageList" "DealDamage(MainMeleeWeapon+1d8, MainMeleeWeaponDamageType)"
data "AlternativeCastTextEvents" ""
data "UseCosts" ""
data "WeaponTypes" "Melee"
data "SpellFlags" "IsMelee;IsHarmful"

new entry "Target_FavoredFoe"
type "SpellData"
data "SpellType" "Target"
data "SpellProperties" "ApplyStatus(FAVORED_FOE,100,10);ApplyStatus(SELF,FAVORED_FOE_OWNER,100,10);ApplyStatus(SELF,FAVORED_FOE_USED,100,1)"
data "TargetRadius" "18"
data "TargetConditions" "Character() and HasStatus('FAVORED_FOE_TARGET',context.Target,context.Source)"
data "RequirementConditions" "not HasStatus('FAVORED_FOE_USED', context.Source) and not HasStatus('FAVORED_FOE_OUTOFUSES', context.Source)"
data "Icon" "Spell_Divination_TrueStrike"
data "DisplayName" "Favored Foe"
data "Description" "When you hit a creature with an attack, you can call on your mystical bond with nature to mark the target as your favored enemy for 1 minute or until you lose your concentration (as if you were concentrating on a spell). The first time on each of your turns that you hit the favored enemy and deal damage to it, including when you mark it, you can increase that damage by 1d4."
data "ExtraDescription" "You can use this feature to mark a favored enemy a number of times equal to your proficiency bonus, and you regain all expended uses when you finish a long rest."
data "TooltipStatusApply" "ApplyStatus(FAVORED_FOE,100,10)"
data "PrepareSound" "Spell_Prepare_RangerDebuff_L1to3_01"
data "CastTextEvent" "Cast"
data "CastSound" "Spell_Cast_Debuff_HuntersMark_L1to3"
data "VocalComponentSound" "Vocal_Component_HuntersMark"
data "TargetSound" "Spell_Impact_Debuff_HuntersMark_L1to3"
data "CycleConditions" "Character() and not Dead()"
data "UseCosts" ""
data "SpellAnimation" "dd86aa43-8189-4d9f-9a5c-454b5fe4a197(SPL_Arcane_Utility_01_Prepare),,;,,;ab7b6aac-b3c9-4918-8f17-f777a94dcb5e(SPL_Somatic_Target_01_Cast),,;57211a11-ed0b-46d7-9369-81df25a85df6(SPL_Somatic_Target_01_Recover),,;cc5b0caf-3ed1-4711-a50d-11dc3f1fdc6a(SPL_Arcane_Utility_01_Loop),,;,,"
data "VerbalIntent" "Debuff"
data "SpellStyleGroup" "Class"
data "SpellFlags" "HasHighGroundRangeExtension;IsConcentration;IsHarmful"
data "MemoryCost" "1"
data "PrepareEffect" "de6dddd8-8a32-4db1-a521-70706648a83b"
data "CastEffect" "2e44371c-a637-4cab-a120-3088b3d83369"
data "TargetEffect" "7537e8f0-1897-4a66-83fe-7f58e9dbd12e"

new entry "Target_FavoredFoe_Redamage"
type "SpellData"
data "SpellType" "Target"
using "Target_FavoredFoe"
data "SpellProperties" "IF(HasStatus('FAVORED_FOE_REAPPLY_CRIT',context.Target,context.Source)):ApplyStatus(FAVORED_FOE_DAMAGE_CRIT,100,0);IF(not HasStatus('FAVORED_FOE_REAPPLY_CRIT',context.Target,context.Source) and HasStatus('FAVORED_FOE_REAPPLY_HIT',context.Target,context.Source)):ApplyStatus(FAVORED_FOE_DAMAGE,100,0);ApplyStatus(FAVORED_FOE_REAPPLY_UNTILNEXTTURN,100,1)"
data "TargetConditions" "Character() and (HasStatus('FAVORED_FOE_REAPPLY_HIT',context.Target,context.Source) or HasStatus('FAVORED_FOE_REAPPLY_CRIT',context.Target,context.Source)) and not HasStatus('FAVORED_FOE_REAPPLY_UNTILNEXTTURN',context.Target,context.Source)"
data "RequirementConditions" "not HasStatus('FAVORED_FOE_USED', context.Source)"
data "Icon" "Spell_Divination_ReapplyHuntersMark"
data "DisplayName" "Favored Foe: Re-apply damage"
data "Description" "Whilst maintaining concentration on Favored Foe, you can apply the increased damage on each of your turns"
data "TooltipStatusApply" ""
data "SpellFlags" "HasHighGroundRangeExtension;IsHarmful"

new entry "Target_Smite_Branding"
type "SpellData"
data "SpellType" "Projectile"
using "Target_Smite_Branding_Melee"
data "ContainerSpells" "Projectile_Smite_Branding;Target_Smite_Branding_Melee"

new entry "Target_Smite_Branding_Melee"
type "SpellData"
data "SpellType" "Target"
using "Target_MainHandAttack"
data "SpellContainerID" "Target_Smite_Branding"
data "Level" "2"
data "SpellSchool" "Evocation"
data "SpellRoll" "Attack(AttackType.MeleeWeaponAttack)"
data "SpellSuccess" "DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(2d6,Radiant); ApplyStatus(BRANDING_SMITE, 100, 10)"
data "SpellFail" "ApplyStatus(SELF,BRANDINGSTRIKE_RECAST,100,10)"
data "Icon" "PassiveAction_WardingFlare"
data "DisplayName" "Branding Smite"
data "Description" "Your weapon gleams with astral radiance. It deals an extra [1] to the target, which becomes visible if it's Invisible. The target also sheds dim light and can't become Invisible until the spell ends."
data "DescriptionParams" "DealDamage(2d6,Radiant)"
data "CastTextEvent" "Cast"
data "UseCosts" "ActionPoint:1;SpellSlot:1:1:2"
data "SpellAnimation" "8b8bb757-21ce-4e02-a2f3-97d55cf2f90b(CMBT_Melee_RHand_01_Prepare),,;6606c30b-be1c-4f17-ae6b-1a591c80b18c(CMBT_Melee_RHand_01_Antic),,;f4ac302b-1569-404f-bd52-1fe443e265df(CMBT_Melee_RHand_01_Attack),,;e8a5c57f-855b-4227-acaa-11e8ce8d7d64(CMBT_Melee_RHand_01_Recover),,;7bb52cd4-0b1c-4926-9165-fa92b75876a3(CMBT_Melee_RHand_01_Loop),,;2b81c18b-9698-4262-a623-932c2bb1296d(CMBT_Melee_RHand_01_Dash),,;0b07883a-08b8-43b6-ac18-84dc9e84ff50(CMBT_Melee_RHand_01_Cancel),,;,,;,,"
data "VerbalIntent" "Damage"
data "SpellFlags" "IsSpell;HasVerbalComponent;IsMelee;IsConcentration;IsHarmful"
data "SpellHitAnimationType" "MagicalDamage_External"
data "MemoryCost" "1"
data "PrepareEffect" "d2ed4f24-55f8-4c70-9bd1-8da22deb8e83"
data "CastEffect" "b5b24254-75d3-4575-af9f-ba3575a2f8b7"
data "TargetEffect" "b94fcfde-d824-4e7d-b9c5-833a50b66537"

new entry "Target_Smite_Branding_Recast"
type "SpellData"
data "SpellType" "Target"
using "Target_Smite_Branding_Melee"
data "SpellContainerID" ""
data "DisplayName" "Branding Smite (Recast)"
data "SpellSuccess" "RemoveStatus(SELF,BRANDINGSTRIKE_RECAST); DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(2d6,Radiant); ApplyStatus(BRANDING_SMITE, 100, 10)"
data "SpellFail" ""
data "UseCosts" "ActionPoint:1"
data "SpellFlags" "IsSpell;IsMelee;CannotTargetTerrain;IsHarmful"

new entry "Target_Smite_Branding_Melee_3"
type "SpellData"
data "SpellType" "Target"
using "Target_Smite_Branding_Melee"
data "SpellSuccess" "DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(3d6,Radiant); ApplyStatus(BRANDING_SMITE, 100, 10)"
data "SpellFail" "ApplyStatus(SELF,BRANDINGSTRIKE_RECAST_3,100,10)"
data "DescriptionParams" "DealDamage(3d6,Radiant)"
data "UseCosts" "ActionPoint:1;SpellSlot:1:1:3"
data "RootSpellID" "Target_Smite_Branding_Melee"
data "PowerLevel" "3"

new entry "Target_Smite_Branding_Recast_3"
type "SpellData"
data "SpellType" "Target"
using "Target_Smite_Branding_Recast"
data "SpellSuccess" "RemoveStatus(SELF,BRANDINGSTRIKE_RECAST_3); DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(3d6,Radiant); ApplyStatus(BRANDING_SMITE, 100, 10)"

new entry "Target_Smite_Divine"
type "SpellData"
data "SpellType" "Target"
using "Target_MainHandAttack"
data "SpellRoll" "Attack(AttackType.MeleeWeaponAttack)"
data "SpellSuccess" "DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(2d8, Radiant); IF(Tagged('UNDEAD') or Tagged('FIEND')):DealDamage(1d8, Radiant)"
data "TargetConditions" "Character()"
data "Icon" "Spell_Evocation_GuidingBolt"
data "DisplayName" "Divine Smite"
data "Description" "When you hit a creature, you expend one spell slot to deal [1] to the target, in addition to the weaponâ€™s damage. The damage increases by [2] if the target is an undead or a fiend."
data "DescriptionParams" "DealDamage(2d8, Radiant);DealDamage(1d8, Radiant)"
data "CastTextEvent" "Cast"
data "UseCosts" "ActionPoint:1"
data "HitCosts" "SpellSlot:1:1:1"
data "SpellAnimation" "8b8bb757-21ce-4e02-a2f3-97d55cf2f90b(CMBT_Melee_RHand_01_Prepare),,;6606c30b-be1c-4f17-ae6b-1a591c80b18c(CMBT_Melee_RHand_01_Antic),,;f4ac302b-1569-404f-bd52-1fe443e265df(CMBT_Melee_RHand_01_Attack),,;e8a5c57f-855b-4227-acaa-11e8ce8d7d64(CMBT_Melee_RHand_01_Recover),,;7bb52cd4-0b1c-4926-9165-fa92b75876a3(CMBT_Melee_RHand_01_Loop),,;2b81c18b-9698-4262-a623-932c2bb1296d(CMBT_Melee_RHand_01_Dash),,;0b07883a-08b8-43b6-ac18-84dc9e84ff50(CMBT_Melee_RHand_01_Cancel),,;,,;,,"
data "SpellFlags" "IsMelee;CannotTargetItems;CannotTargetTerrain;IsHarmful"

new entry "Target_Smite_Divine_Ranger"
type "SpellData"
data "SpellType" "Target"
using "Target_Smite_Divine"
data "Cooldown" "OncePerRest"
data "HitCosts"  ""

new entry "Target_Smite_Divine_2"
type "SpellData"
data "SpellType" "Target"
using "Target_Smite_Divine"
data "SpellSuccess" "DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(3d8, Radiant); IF(Tagged('UNDEAD') or Tagged('FIEND')):DealDamage(1d8, Radiant)"
data "Icon" "Spell_Evocation_GuidingBolt_2"
data "DescriptionParams" "DealDamage(3d8, Radiant);DealDamage(1d8, Radiant)"
data "HitCosts" "SpellSlot:1:1:2"
data "RootSpellID" "Target_Smite_Divine"
data "PowerLevel" "2"

new entry "Target_Smite_Divine_3"
type "SpellData"
data "SpellType" "Target"
using "Target_Smite_Divine"
data "SpellSuccess" "DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(4d8, Radiant); IF(Tagged('UNDEAD') or Tagged('FIEND')):DealDamage(1d8, Radiant)"
data "Icon" "Spell_Evocation_GuidingBolt_2"
data "DescriptionParams" "DealDamage(4d8, Radiant);DealDamage(1d8, Radiant)"
data "HitCosts" "SpellSlot:1:1:3"
data "RootSpellID" "Target_Smite_Divine"
data "PowerLevel" "3"

new entry "Target_Smite_Divine_4"
type "SpellData"
data "SpellType" "Target"
using "Target_Smite_Divine"
data "SpellSuccess" "DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(5d8, Radiant); IF(Tagged('UNDEAD') or Tagged('FIEND')):DealDamage(1d8, Radiant)"
data "Icon" "Spell_Evocation_GuidingBolt_2"
data "DescriptionParams" "DealDamage(5d8, Radiant);DealDamage(1d8, Radiant)"
data "HitCosts" "SpellSlot:1:1:4"
data "RootSpellID" "Target_Smite_Divine"
data "PowerLevel" "4"

new entry "Target_Smite_Divine_5"
type "SpellData"
data "SpellType" "Target"
using "Target_Smite_Divine"
data "SpellSuccess" "DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(5d8, Radiant); IF(Tagged('UNDEAD') or Tagged('FIEND')):DealDamage(1d8, Radiant)"
data "Icon" "Spell_Evocation_GuidingBolt_2"
data "DescriptionParams" "DealDamage(5d8, Radiant);DealDamage(1d8, Radiant)"
data "HitCosts" "SpellSlot:1:1:5"
data "RootSpellID" "Target_Smite_Divine"
data "PowerLevel" "5"

new entry "Target_Smite_Searing"
type "SpellData"
data "SpellType" "Target"
using "Target_MainHandAttack"
data "Level" "1"
data "SpellSchool" "Evocation"
data "SpellRoll" "Attack(AttackType.MeleeWeaponAttack)"
data "SpellSuccess" "DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(1d6, Fire); ApplyStatus(SEARING_SMITE, 100, 10)"
data "SpellFail" "ApplyStatus(SELF,SEARINGSTRIKE_RECAST,100,10)"
data "Icon" "Spell_Evocation_SearingSmite"
data "DisplayName" "Shared_Target_Smite_Searing_DisplayName"
data "Description" "Shared_Target_Smite_Searing_Description"
data "DescriptionParams" "DealDamage(1d6,Fire)"
data "ExtraDescription" "Shared_Target_Smite_Searing_ExtraDescription"
data "ExtraDescriptionParams" "DealDamage(1d6,Fire)"
data "TooltipDamageList" "DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType);DealDamage(1d6,Fire)"
data "TooltipAttackSave" "MeleeWeaponAttack"
data "TooltipStatusApply" "ApplyStatus(SEARING_SMITE, 100, 10)"
data "CastTextEvent" "Cast"
data "CastSound" "Spell_Cast_Damage_SearingSmite_L1to3"
data "TargetSound" "Spell_Impact_Damage_SearingSmite_L1to3"
data "UseCosts" "ActionPoint:1;SpellSlot:1:1:1"
data "SpellAnimation" "8b8bb757-21ce-4e02-a2f3-97d55cf2f90b(CMBT_Melee_RHand_01_Prepare),,;6606c30b-be1c-4f17-ae6b-1a591c80b18c(CMBT_Melee_RHand_01_Antic),,;f4ac302b-1569-404f-bd52-1fe443e265df(CMBT_Melee_RHand_01_Attack),,;e8a5c57f-855b-4227-acaa-11e8ce8d7d64(CMBT_Melee_RHand_01_Recover),,;7bb52cd4-0b1c-4926-9165-fa92b75876a3(CMBT_Melee_RHand_01_Loop),,;2b81c18b-9698-4262-a623-932c2bb1296d(CMBT_Melee_RHand_01_Dash),,;0b07883a-08b8-43b6-ac18-84dc9e84ff50(CMBT_Melee_RHand_01_Cancel),,;,,;,,"
data "SpellFlags" "IsConcentration;IsHarmful;HasVerbalComponent;IsSpell"
data "HitAnimationType" "MagicalDamage_External"
data "PrepareEffect" "d2ed4f24-55f8-4c70-9bd1-8da22deb8e83"
data "CastEffect" "b5b24254-75d3-4575-af9f-ba3575a2f8b7"
data "TargetEffect" "d5f54cd9-9252-4bcd-9e04-7e63d071eac6"

new entry "Target_Smite_Searing_Recast"
type "SpellData"
data "SpellType" "Target"
using "Target_Smite_Searing"
data "DisplayName" "Searing Smite (Recast)"
data "SpellSuccess" "RemoveStatus(SELF,SEARINGSTRIKE_RECAST); DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(1d6, Fire); ApplyStatus(SEARING_SMITE, 100, 10)"
data "SpellFail" ""
data "UseCosts" "ActionPoint:1"
data "SpellFlags" "IsSpell;IsHarmful"

new entry "Target_Smite_Searing_2"
type "SpellData"
data "SpellType" "Target"
using "Target_Smite_Searing"
data "SpellSuccess" "DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(2d6, Fire); ApplyStatus(SEARING_SMITE, 100, 10)"
data "SpellFail" "ApplyStatus(SELF,SEARINGSTRIKE_RECAST_2,100,10)"
data "Icon" "Spell_Evocation_SearingSmite_2"
data "UseCosts" "ActionPoint:1;SpellSlot:1:1:2"
data "RootSpellID" "Target_Smite_Searing"
data "PowerLevel" "2"

new entry "Target_Smite_Searing_Recast_2"
type "SpellData"
data "SpellType" "Target"
using "Target_Smite_Searing_Recast"
data "SpellSuccess" "RemoveStatus(SELF,SEARINGSTRIKE_RECAST_2); DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(2d6, Fire); ApplyStatus(SEARING_SMITE, 100, 10)"

new entry "Target_Smite_Searing_3"
type "SpellData"
data "SpellType" "Target"
using "Target_Smite_Searing"
data "SpellSuccess" "DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(3d6, Fire); ApplyStatus(SEARING_SMITE, 100, 10)"
data "SpellFail" "ApplyStatus(SELF,SEARINGSTRIKE_RECAST_3,100,10)"
data "Icon" "Spell_Evocation_SearingSmite_2"
data "UseCosts" "ActionPoint:1;SpellSlot:1:1:3"
data "RootSpellID" "Target_Smite_Searing"
data "PowerLevel" "3"

new entry "Target_Smite_Searing_Recast_3"
type "SpellData"
data "SpellType" "Target"
using "Target_Smite_Searing_Recast"
data "SpellSuccess" "RemoveStatus(SELF,SEARINGSTRIKE_RECAST_3); DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(3d6, Fire); ApplyStatus(SEARING_SMITE, 100, 10)"

new entry "Target_Smite_Searing_4"
type "SpellData"
data "SpellType" "Target"
using "Target_Smite_Searing"
data "SpellSuccess" "DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(4d6, Fire); ApplyStatus(SEARING_SMITE, 100, 10)"
data "SpellFail" "ApplyStatus(SELF,SEARINGSTRIKE_RECAST_4,100,10)"
data "Icon" "Spell_Evocation_SearingSmite_2"
data "UseCosts" "ActionPoint:1;SpellSlot:1:1:4"
data "RootSpellID" "Target_Smite_Searing"
data "PowerLevel" "4"

new entry "Target_Smite_Searing_Recast_4"
type "SpellData"
data "SpellType" "Target"
using "Target_Smite_Searing_Recast"
data "SpellSuccess" "RemoveStatus(SELF,SEARINGSTRIKE_RECAST_4); DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(4d6, Fire); ApplyStatus(SEARING_SMITE, 100, 10)"

new entry "Target_Smite_Searing_5"
type "SpellData"
data "SpellType" "Target"
using "Target_Smite_Searing"
data "SpellSuccess" "DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(5d6, Fire); ApplyStatus(SEARING_SMITE, 100, 10)"
data "SpellFail" "ApplyStatus(SELF,SEARINGSTRIKE_RECAST_5,100,10)"
data "Icon" "Spell_Evocation_SearingSmite_2"
data "UseCosts" "ActionPoint:1;SpellSlot:1:1:5"
data "RootSpellID" "Target_Smite_Searing"
data "PowerLevel" "5"

new entry "Target_Smite_Searing_Recast_5"
type "SpellData"
data "SpellType" "Target"
using "Target_Smite_Searing_Recast"
data "SpellSuccess" "RemoveStatus(SELF,SEARINGSTRIKE_RECAST_5); DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(5d6, Fire); ApplyStatus(SEARING_SMITE, 100, 10)"

new entry "Target_Smite_Thunderous"
type "SpellData"
data "SpellType" "Target"
using "Target_MainHandAttack"
data "Level" "1"
data "SpellSchool" "Evocation"
data "SpellRoll" "Attack(AttackType.MeleeWeaponAttack)"
data "SpellSuccess" "DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(2d6, Thunder); IF(not Item() and not SavingThrow(Ability.Strength, SourceSpellDC())):ApplyStatus(THUNDEROUS_SMITE, 100, 1)"
data "SpellFail" "ApplyStatus(SELF,THUNDEROUSSMITE_RECAST,100,10)"
data "Icon" "Spell_Evocation_Thunderwave"
data "DisplayName" "Thunderous Smite"
data "Description" "Your weapon rings with thunder. It deals an extra [1] to the target. If the target is a creature, it must succeed on a Strength saving throw or be pushed 10 feet away from you and knocked prone."
data "DescriptionParams" "DealDamage(2d6,Thunder)"
data "CastTextEvent" "Cast"
data "UseCosts" "ActionPoint:1;SpellSlot:1:1:1"
data "SpellAnimation" "8b8bb757-21ce-4e02-a2f3-97d55cf2f90b(CMBT_Melee_RHand_01_Prepare),,;6606c30b-be1c-4f17-ae6b-1a591c80b18c(CMBT_Melee_RHand_01_Antic),,;f4ac302b-1569-404f-bd52-1fe443e265df(CMBT_Melee_RHand_01_Attack),,;e8a5c57f-855b-4227-acaa-11e8ce8d7d64(CMBT_Melee_RHand_01_Recover),,;7bb52cd4-0b1c-4926-9165-fa92b75876a3(CMBT_Melee_RHand_01_Loop),,;2b81c18b-9698-4262-a623-932c2bb1296d(CMBT_Melee_RHand_01_Dash),,;0b07883a-08b8-43b6-ac18-84dc9e84ff50(CMBT_Melee_RHand_01_Cancel),,;,,;,,"
data "SpellFlags" "IsConcentration;IsSpell;HasVerbalComponent;IsHarmful"
data "SpellHitAnimationType" "MagicalDamage_Electric"
data "PrepareEffect" "d2ed4f24-55f8-4c70-9bd1-8da22deb8e83"
data "CastEffect" "b5b24254-75d3-4575-af9f-ba3575a2f8b7"
data "TargetEffect" "a3e2368b-f486-4cfc-b04a-b02e23383280"

new entry "Target_Smite_Thunderous_Ranger"
type "SpellData"
data "SpellType" "Target"
using "Target_Smite_Thunderous"
data "Cooldown" "OncePerRest"
data "UseCosts" "ActionPoint:1"

new entry "Target_Smite_Thunderous_Recast"
type "SpellData"
data "SpellType" "Target"
using "Target_Smite_Thunderous"
data "DisplayName" "Thunderous Smite (Recast)"
data "SpellSuccess" "RemoveStatus(SELF,THUNDEROUSSMITE_RECAST);DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(2d6, Thunder); IF(not Item() and not SavingThrow(Ability.Strength, SourceSpellDC())):ApplyStatus(THUNDEROUS_SMITE, 100, 1)"
data "SpellFail" ""
data "UseCosts" "ActionPoint:1"
data "SpellFlags" "IsSpell;IsHarmful"

new entry "Target_Smite_Wrathful"
type "SpellData"
data "SpellType" "Target"
using "Target_MainHandAttack"
data "Level" "1"
data "SpellSchool" "Evocation"
data "SpellRoll" "Attack(AttackType.MeleeWeaponAttack)"
data "SpellSuccess" "DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); DealDamage(1d6,Psychic); IF(not SavingThrow(Ability.Wisdom, SourceSpellDC())):ApplyStatus(WRATHFUL_SMITE,100,10)"
data "SpellFail" "ApplyStatus(SELF,WRATHFULSTRIKE_RECAST,100,10)"
data "Icon" "Status_Frightened"
data "DisplayName" "Wrathful Smite"
data "Description" "Your weapon stirs up feelings of doom. It deals an extra [1] to the target. If the target is a creature, it must make a Wisdom saving throw or be frightened of you until the spell ends."
data "DescriptionParams" "DealDamage(1d6,Psychic)"
data "ExtraDescription" "As an action, the creature can make a Wisdom check against your spell save DC to steel its resolve and end this spell."
data "TooltipStatusApply" "ApplyStatus(FRIGHTENED,100,10)"
data "CastTextEvent" "Cast"
data "UseCosts" "ActionPoint:1;SpellSlot:1:1:1"
data "SpellAnimation" "8b8bb757-21ce-4e02-a2f3-97d55cf2f90b(CMBT_Melee_RHand_01_Prepare),,;6606c30b-be1c-4f17-ae6b-1a591c80b18c(CMBT_Melee_RHand_01_Antic),,;f4ac302b-1569-404f-bd52-1fe443e265df(CMBT_Melee_RHand_01_Attack),,;e8a5c57f-855b-4227-acaa-11e8ce8d7d64(CMBT_Melee_RHand_01_Recover),,;7bb52cd4-0b1c-4926-9165-fa92b75876a3(CMBT_Melee_RHand_01_Loop),,;2b81c18b-9698-4262-a623-932c2bb1296d(CMBT_Melee_RHand_01_Dash),,;0b07883a-08b8-43b6-ac18-84dc9e84ff50(CMBT_Melee_RHand_01_Cancel),,;,,;,,"
data "SpellFlags" "IsSpell;HasVerbalComponent;IsConcentration;IsHarmful"
data "SpellHitAnimationType" "MagicalDamage_Psychic"
data "PrepareEffect" "d2ed4f24-55f8-4c70-9bd1-8da22deb8e83"
data "CastEffect" "b5b24254-75d3-4575-af9f-ba3575a2f8b7"
data "TargetEffect" "a0aee53a-d702-4901-9bb3-7cf08e214346"

new entry "Target_Smite_Wrathful_Ranger"
type "SpellData"
data "SpellType" "Target"
using "Target_Smite_Wrathful"
data "Cooldown" "OncePerRest"
data "UseCosts" "ActionPoint:1"

new entry "Target_Smite_Wrathful_Recast"
type "SpellData"
data "SpellType" "Target"
using "Target_Smite_Wrathful"
data "DisplayName" "Wrathful Smite (Recast)"
data "SpellSuccess" "RemoveStatus(SELF,WRATHFULSTRIKE_RECAST);DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); IF(not SavingThrow(Ability.Wisdom, SourceSpellDC())):ApplyStatus(WRATHFUL_SMITE,100,10);DealDamage(1d6,Psychic)"
data "SpellFail" ""
data "UseCosts" "ActionPoint:1"
data "SpellFlags" "IsSpell;IsHarmful"

// Status_BOOST //

new entry "BRANDINGSTRIKE_RECAST"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "Branding Smite"
data "Description" "Provides Branding Smite for free on a miss"
data "Icon" "PassiveAction_WardingFlare"
data "Boosts" "UnlockSpell(Target_Smite_Branding_Recast);UnlockSpell(Projectile_Smite_Branding_Recast)"

new entry "BRANDINGSTRIKE_RECAST_3"
type "StatusData"
data "StatusType" "BOOST"
using "BRANDINGSTRIKE_RECAST"
data "Boosts" "UnlockSpell(Target_Smite_Branding_Recast_3);UnlockSpell(Projectile_Smite_Branding_Recast_3)"

new entry "DREADAMBUSHER_EXTRAATTACKSPELLS"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "Dread Ambusher: Extra Attack"
data "Description" "Additional attack with an extra 1d8 damage."
data "Icon" "Target_MainHandAttack"
data "TickType" "EndTurn"
data "Boosts" "UnlockSpell(Target_DreadAmbusher_ExtraAttack);UnlockSpell(Projectile_DreadAmbusher_ExtraAttack)"

new entry "DREADAMBUSHER_EXTRAATTACKUSED"
type "StatusData"
data "StatusType" "BOOST"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"

new entry "DREADAMBUSHER_FIRSTROUND"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "Dread Ambusher"
data "Description" "Your walking speed increases by 3m until the end of your turn."
data "Icon" "Action_Dash"
data "Passives" "DreadAmbusher_ExtraAttack"
data "TickType" "EndTurn"
data "Boosts" "ActionResource(Movement,3,0)"
data "OnApplyFunctors" "ApplyStatus(DREADAMBUSHER_COMBATISNTOVER,100,-1)"

new entry "DREADAMBUSHER_COMBATISNTOVER"
type "StatusData"
data "StatusType" "BOOST"
data "RemoveEvents" "OnTurn"
data "RemoveConditions" "not Combat()"
data "OnRemoveFunctors" "RemoveStatus(DREADAMBUSHER_EXTRAATTACKUSED)"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"

new entry "DREADAMBUSHER_FIRSTROUND_TURNIDENTIFER"
type "StatusData"
data "StatusType" "BOOST"
data "OnApplyFunctors" "IF(HasPassive('DreadAmbusher',context.Source)):ApplyStatus(DREADAMBUSHER_FIRSTROUND,100,1)"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"

new entry "ENSNARED"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "Shared_Status_BOOST_ENSNARED_DisplayName"
data "Description" "Shared_Status_BOOST_ENSNARED_Description"
data "DescriptionParams" "DealDamage(1d6,Piercing)"
data "Icon" "statIcons_Ensnared"
data "StillAnimationType" "Snared"
data "StillAnimationPriority" "Snared"
data "SoundVocalStart" "WEAK"
data "StackId" "ENSNARED"
data "TickType" "EndTurn"
data "Boosts" "Advantage(AttackTarget);Disadvantage(AttackRoll);ActionResourceBlock(Movement);IF(HasPassive('FavoredEnemy_BountyHunter',context.Source)):Disadvantage(SavingThrow, Strength);Disadvantage(SavingThrow,Dexterity);Attribute(Grounded)"
data "RemoveConditions" "SavingThrow(Ability.Strength, SourceSpellDC(),AdvantageOnRestrained(),DisadvantageOnRestrained())"
data "RemoveEvents" "OnTurn"
data "StatusGroups" "SG_Restrained;SG_Condition"
data "ApplyEffect" "92f376fb-aa71-4858-99b2-785cb9694734"
data "StatusEffect" "b5561d10-6cc4-4403-a567-b569c96a5d76"

new entry "ENSNARING_STRIKE"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "Shared_Status_BOOST_ENSNARING_STRIKE_DisplayName"
data "Description" "Shared_Status_BOOST_ENSNARING_STRIKE_Description"
data "DescriptionParams" "DealDamage(1d6,Piercing)"
data "Icon" "Spell_Conjuration_EnsnaringStrikeMelee"
data "StillAnimationType" "Snared"
data "StillAnimationPriority" "Snared"
data "StackId" "ENSNARING_STRIKE"
data "Boosts" "Advantage(AttackTarget);Disadvantage(AttackRoll);ActionResourceBlock(Movement);IF(HasPassive('FavoredEnemy_BountyHunter',context.Source)):Disadvantage(SavingThrow, Strength);Disadvantage(SavingThrow,Dexterity);Attribute(Grounded)"
data "RemoveConditions" "SavingThrow(Ability.Strength, SourceSpellDC(),AdvantageOnRestrained(),DisadvantageOnRestrained())"
data "RemoveEvents" "OnTurn"
data "TickFunctors" "DealDamage(1d6, Piercing)"
data "StatusGroups" "SG_Restrained;SG_Condition"
data "ApplyEffect" "914844bf-3848-4193-9fcd-a27b82b394c0"
data "StatusEffect" "ce1c75fc-e400-4b27-a21d-4df66f812efc"

new entry "ENSNARING_STRIKE_2"
type "StatusData"
data "StatusType" "BOOST"
using "ENSNARING_STRIKE"
data "DescriptionParams" "DealDamage(2d6,Piercing)"
data "TickFunctors" "DealDamage(2d6, Piercing)"

new entry "ENSNARING_STRIKE_3"
type "StatusData"
data "StatusType" "BOOST"
using "ENSNARING_STRIKE"
data "DescriptionParams" "DealDamage(3d6,Piercing)"
data "TickFunctors" "DealDamage(3d6, Piercing)"

new entry "ENSNARING_STRIKE_4"
type "StatusData"
data "StatusType" "BOOST"
using "ENSNARING_STRIKE"
data "DescriptionParams" "DealDamage(4d6,Piercing)"
data "TickFunctors" "DealDamage(4d6, Piercing)"

new entry "ENSNARING_STRIKE_5"
type "StatusData"
data "StatusType" "BOOST"
using "ENSNARING_STRIKE"
data "DescriptionParams" "DealDamage(5d6,Piercing)"
data "TickFunctors" "DealDamage(5d6, Piercing)"

new entry "ENSNARINGSTRIKE_RECAST"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "Ensnaring Strike"
data "Description" "Provides Ensnaring Strike for free on a miss"
data "Icon" "Spell_Conjuration_EnsnaringStrikeRanged"
data "Boosts" "UnlockSpell(Projectile_EnsnaringStrike_Recast);UnlockSpell(Target_EnsnaringStrike_Recast)"

new entry "ENSNARINGSTRIKE_RECAST_2"
type "StatusData"
data "StatusType" "BOOST"
using "ENSNARINGSTRIKE_RECAST"
data "Boosts" "UnlockSpell(Projectile_EnsnaringStrike_Recast_2);UnlockSpell(Target_EnsnaringStrike_Recast_2)"

new entry "ENSNARINGSTRIKE_RECAST_3"
type "StatusData"
data "StatusType" "BOOST"
using "ENSNARINGSTRIKE_RECAST"
data "Boosts" "UnlockSpell(Projectile_EnsnaringStrike_Recast_3);UnlockSpell(Target_EnsnaringStrike_Recast_3)"

new entry "ENSNARINGSTRIKE_RECAST_4"
type "StatusData"
data "StatusType" "BOOST"
using "ENSNARINGSTRIKE_RECAST"
data "Boosts" "UnlockSpell(Projectile_EnsnaringStrike_Recast_4);UnlockSpell(Target_EnsnaringStrike_Recast_4)"

new entry "ENSNARINGSTRIKE_RECAST_5"
type "StatusData"
data "StatusType" "BOOST"
using "ENSNARINGSTRIKE_RECAST"
data "Boosts" "UnlockSpell(Projectile_EnsnaringStrike_Recast_5);UnlockSpell(Target_EnsnaringStrike_Recast_5)"

new entry "FAVORED_FOE"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "Favored Foe"
data "Description" "The first time on each of your turns that you hit the favored enemy and deal damage to it, including when you mark it, you can increase that damage by 1d4."
data "Icon" "Spell_Divination_HuntersMark"
data "SoundStart" "Spell_Status_HuntersMark_MO"
data "OnApplyFunctors" "IF(HasStatus('FAVORED_FOE_TARGET_CRIT',context.Target,context.Source)):ApplyStatus(FAVORED_FOE_DAMAGE_CRIT,100,0);IF(not HasStatus('FAVORED_FOE_TARGET_CRIT',context.Target,context.Source)):ApplyStatus(FAVORED_FOE_DAMAGE,100,0)"
data "TickType" "StartTurn"
data "TickFunctors" "IF(not HasStatus('FAVORED_FOE_REAPPLY',context.Target,context.Source)):ApplyStatus(FAVORED_FOE_REAPPLY,100,-1)"
data "ApplyEffect" "5a259bdd-10d5-453a-9aee-1e85a986baf4"
data "StatusEffect" "0d122bff-6d13-4373-a807-b8663d48559e"

new entry "FAVORED_FOE_DAMAGE"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "Favored Foe Damage"
data "OnApplyFunctors" "IF(WieldingWeapon('Ammunition', false, false, context.Source)):DealDamage(1d4,MainRangedWeaponDamageType);IF(WieldingWeapon('Melee', false, false, context.Source)):DealDamage(1d4,MainMeleeWeaponDamageType);IF(not WieldingWeapon('Ammunition', false, false, context.Source) and not WieldingWeapon('Melee', false, false, context.Source)):DealDamage(1d4,Bludgeoning)"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"

new entry "FAVORED_FOE_DAMAGE_CRIT"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "Favored Foe Crit Damage"
data "OnApplyFunctors" "IF(WieldingWeapon('Ammunition', false, false, context.Source)):DealDamage(2d4,MainRangedWeaponDamageType);IF(WieldingWeapon('Melee', false, false, context.Source)):DealDamage(2d4,MainMeleeWeaponDamageType);IF(not WieldingWeapon('Ammunition', false, false, context.Source) and not WieldingWeapon('Melee', false, false, context.Source)):DealDamage(2d4,Bludgeoning)"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"

new entry "FAVORED_FOE_OWNER"
type "StatusData"
data "StatusType" "BOOST"
data "Passives" "FavoredEnemy_FavoredFoe_FurtherDamage"
data "Boosts" "UnlockSpell(Target_FavoredFoe_Redamage)"
data "OnApplyFunctors" "IF(HasStatus('FAVORED_FOE_USES1')):ApplyStatus(FAVORED_FOE_OUTOFUSES,100,-1);IF(not HasStatus('FAVORED_FOE_USES1')):ApplyStatus(FAVORED_FOE_USES1,100,-1);IF(HasStatus('FAVORED_FOE_OUTOFUSES')):RemoveStatus(FAVORED_FOE_USES1)"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"

new entry "FAVORED_FOE_REAPPLY"
type "StatusData"
data "StatusType" "BOOST"
data "TickType" "StartTurn"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"

new entry "FAVORED_FOE_REAPPLY_HIT"
type "StatusData"
data "StatusType" "BOOST"
data "TickType" "StartTurn"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"

new entry "FAVORED_FOE_REAPPLY_CRIT"
type "StatusData"
data "StatusType" "BOOST"
data "TickType" "StartTurn"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"

new entry "FAVORED_FOE_REAPPLY_UNTILNEXTTURN"
type "StatusData"
data "StatusType" "BOOST"
data "TickType" "StartTurn"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"

new entry "FAVORED_FOE_TARGET"
type "StatusData"
data "StatusType" "BOOST"
data "TickType" "StartTurn"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"

new entry "FAVORED_FOE_TARGET_CRIT"
type "StatusData"
data "StatusType" "BOOST"
data "TickType" "StartTurn"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"

new entry "FAVORED_FOE_USED"
type "StatusData"
data "StatusType" "BOOST"
data "TickType" "EndTurn"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"

new entry "FAVORED_FOE_OUTOFUSES"
type "StatusData"
data "StatusType" "BOOST"
data "Icon" "Spell_Divination_HuntersMark"
data "DisplayName" "Favored Foe uses left: 0"
data "Description" "You cannot use Favored Foe further until you have rested"

new entry "FAVORED_FOE_USES1"
type "StatusData"
data "StatusType" "BOOST"
data "Icon" "Spell_Divination_HuntersMark"
data "DisplayName" "Favored Foe uses left: 1"

new entry "FAVORED_FOE_USES2"
type "StatusData"
data "StatusType" "BOOST"
data "Icon" "Spell_Divination_HuntersMark"
data "DisplayName" "Favored Foe uses left: 2"

new entry "FAVORED_FOE_USES3"
type "StatusData"
data "StatusType" "BOOST"
data "Icon" "Spell_Divination_HuntersMark"
data "DisplayName" "Favored Foe uses left: 3"

new entry "FAVORED_FOE_USES4"
type "StatusData"
data "StatusType" "BOOST"
data "Icon" "Spell_Divination_HuntersMark"
data "DisplayName" "Favored Foe uses left: 4"

new entry "SEARINGSTRIKE_RECAST"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "Searing Smite"
data "Description" "Provides Searing Smite for free on a miss"
data "Icon" "Spell_Evocation_SearingSmite"
data "Boosts" "UnlockSpell(Target_Smite_Searing_Recast)"

new entry "SEARINGSTRIKE_RECAST_2"
type "StatusData"
data "StatusType" "BOOST"
using "SEARINGSTRIKE_RECAST"
data "Boosts" "UnlockSpell(Target_Smite_Searing_Recast_2)"

new entry "SEARINGSTRIKE_RECAST_3"
type "StatusData"
data "StatusType" "BOOST"
using "SEARINGSTRIKE_RECAST"
data "Boosts" "UnlockSpell(Target_Smite_Searing_Recast_3)"

new entry "SEARINGSTRIKE_RECAST_4"
type "StatusData"
data "StatusType" "BOOST"
using "SEARINGSTRIKE_RECAST"
data "Boosts" "UnlockSpell(Target_Smite_Searing_Recast_4)"

new entry "SEARINGSTRIKE_RECAST_5"
type "StatusData"
data "StatusType" "BOOST"
using "SEARINGSTRIKE_RECAST"
data "Boosts" "UnlockSpell(Target_Smite_Searing_Recast_5)"

new entry "THUNDEROUS_SMITE"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "Thunderous Smite"
data "Icon" "Spell_Evocation_ShockingGrasp"
data "DisplayName" "Thunderous Smite"
data "OnApplyFunctors" "Force(3);ApplyStatus(PRONE,100,1)"

new entry "THUNDEROUSSMITE_RECAST"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "Thunderous Smite"
data "Description" "Provides Thunderous Smite for free on a miss"
data "Icon" "Spell_Evocation_ShockingGrasp"
data "Boosts" "UnlockSpell(Target_Smite_Thunderous_Recast)"

new entry "WRATHFULSMITE_RECAST"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "Wrathful Smite"
data "Description" "Provides Wrathful Smite for free on a miss"
data "Icon" "Status_Frightened"
data "Boosts" "UnlockSpell(Target_Smite_Wrathful_Recast)"

// Status_FEAR //

new entry "WRATHFUL_SMITE"
type "StatusData"
data "StatusType" "FEAR"
data "DisplayName" "Frightened (Wrathful Smite)"
data "Description" "You have disadvantage on all ability checks and attack rolls while the source of your fear is within Line of Sight"
data "Icon" "Status_Frightened"
data "FormatColor" "White"
data "StatusEffect" "VFX_Status_Control_01"
data "StackId" "Stack_Fear"
data "RemoveEvents" "OnTurn"
data "RemoveConditions" "not HasStatus('WRATHFUL_SMITE_DURATION',context.Source)"
data "Boosts" "IF(CanSeeStatusSource()):Disadvantage(AllAbilities);IF(CanSeeStatusSource()):Disadvantage(AttackRoll);UnlockSpell(Shout_RemoveWrathfulSmite)"
data "OnRemoveFunctors" "IF(HasStatus('WRATHFUL_SMITE_DURATION',context.Source)):ApplyStatus(WRATHFUL_SMITE_CHECK,100,0)"
data "StatusPropertyFlags" "InitiateCombat"
data "StatusGroups" "SG_Frightened;SG_Condition"

new entry "WRATHFUL_SMITE_CHECK"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "Wrathful Smite saving throw"
data "Description" "Rolls a Wisdom saving throw against the spell save DC, when failed Frightened is re-applied"
data "OnRemoveFunctors" "IF(not SavingThrow(Ability.Wisdom, SourceSpellDC())):ApplyStatus(WRATHFUL_SMITE,100,10)"
data "StatusPropertyFlags" "DisableOverhead;DisablePortraitIndicator"

// Passive //

new entry "DreadAmbusher"
type "PassiveData"
data "DisplayName" "Dread Ambusher"
data "Description" "Gain a bonus to initiative rolls equal to your Wisdom modifier. At the start of combat, your walking speed increases by 3m, which lasts until the end of your turn. If you take the Attack action on that turn, you can make one additional weapon attack as part of that action. If that attack hits, the target takes an extra 1d8 damage of the weapon's damage type."
data "Boosts" "Initiative(+WisdomModifier)"

new entry "DreadAmbusher_ExtraAttack"
type "PassiveData"
data "DisplayName" "Dread Ambusher"
data "Conditions" "IsAttack() and not IsAttackType(AttackType.MeleeOffHandWeaponAttack) and not IsAttackType(AttackType.RangedOffHandWeaponAttack) and not IsAttackType(AttackType.MeleeSpellAttack) and not IsAttackType(AttackType.RangedSpellAttack) and HasPassive('DreadAmbusher',context.Source)"
data "StatsFunctors" "IF(IsAttack() and not HasStatus('DREADAMBUSHER_EXTRAATTACKSPELLS',context.Source) and not HasStatus('DREADAMBUSHER_EXTRAATTACKUSED',context.Source)):ApplyStatus(SELF,DREADAMBUSHER_EXTRAATTACKSPELLS,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "FavoredEnemy_BountyHunter"
type "PassiveData"
data "DisplayName" "Shared_Passive_FavoredEnemy_BountyHunter_DisplayName"
data "Description" "Gain proficiency in Investigation. Creatures you Restrain have disadvantage on strength and dexterity saving throws."
data "Boosts" "ProficiencyBonus(Skill,Investigation)"

new entry "FavoredEnemy_CloudChaser"
type "PassiveData"
data "DisplayName" "Cloud Chaser"
data "Description" "Gain proficiency in Nature and the Thunderous Smite spell, which can be cast once per day. Wisdom is your spellcasting ability for this spell."
data "Boosts" "ProficiencyBonus(Skill,Nature);UnlockSpell(Target_Smite_Thunderous_Ranger,,,,Wisdom)"

new entry "FavoredEnemy_DragonSlayer"
type "PassiveData"
data "DisplayName" "Dragon Slayer"
data "Description" "Gain proficiency in Intimidation and the Wrathful Smite spell, which can be cast once per day. Wisdom is your spellcasting ability for this spell."
data "Boosts" "ProficiencyBonus(Skill,Intimidation);UnlockSpell(Target_Smite_Wrathful_Ranger,,,,Wisdom)"

new entry "FavoredEnemy_FavoredFoe"
type "PassiveData"
data "DisplayName" "Favored Foe"
data "Description" "Gain the Favored Foe feature, which allows you to increase damage by 1d4 after you hit a creature."
data "Boosts" "UnlockSpell(Target_FavoredFoe)"
data "Conditions" "IsAttack() and HasDamageEffectFlag(DamageFlags.Hit) and not HasStatus('FAVORED_FOE',context.Target,context.Source)"
data "StatsFunctors" "IF(not HasStatus('FAVORED_FOE_TARGET',context.Target,context.Source)):ApplyStatus(FAVORED_FOE_TARGET,100,1);IF(not HasDamageEffectFlag(DamageFlags.Critical) and HasStatus('FAVORED_FOE_TARGET_CRIT',context.Target,context.Source)):RemoveStatus(FAVORED_FOE_TARGET_CRIT);IF(HasDamageEffectFlag(DamageFlags.Critical) and not HasStatus('FAVORED_FOE_TARGET_CRIT',context.Target,context.Source)):ApplyStatus(FAVORED_FOE_TARGET_CRIT,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "FavoredEnemy_FavoredFoe_FurtherDamage"
type "PassiveData"
data "DisplayName" "Favored Foe"
data "Conditions" "IsAttack() and HasDamageEffectFlag(DamageFlags.Hit) and ((not TurnBased(context.Source) and HasStatus('FAVORED_FOE',context.Target,context.Source)) or HasStatus('FAVORED_FOE_REAPPLY',context.Target,context.Source))"
data "StatsFunctors" "IF(not HasStatus('FAVORED_FOE_REAPPLY_HIT',context.Target,context.Source)):ApplyStatus(FAVORED_FOE_REAPPLY_HIT,100,1);IF(not HasDamageEffectFlag(DamageFlags.Critical) and HasStatus('FAVORED_FOE_REAPPLY_CRIT',context.Target,context.Source)):RemoveStatus(FAVORED_FOE_REAPPLY_CRIT);IF(HasDamageEffectFlag(DamageFlags.Critical) and not HasStatus('FAVORED_FOE_REAPPLY_CRIT',context.Target,context.Source)):ApplyStatus(FAVORED_FOE_REAPPLY_CRIT,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "FavoredEnemy_SanctifiedStalker"
type "PassiveData"
data "DisplayName" "Shared_Passive_FavoredEnemy_SanctifiedStalker_DisplayName"
data "Description" "You swore to hunt the enemies of a holy order. Gain proficiency in Religion and the Divine Smite spell, which can be cast once per day."
data "Boosts" "ProficiencyBonus(Skill,Religion);UnlockSpell(Target_Smite_Divine_Ranger)"

new entry "PrimalAwareness"
type "PassiveData"
data "DisplayName" "Primal Awareness"
data "Description" "You can focus your awareness through the interconnections of nature: you learn the Speak with Animals spell if you don't already know it. You can also cast it once per day without expending a spell slot."
data "Boosts" "UnlockSpell(Shout_SpeakWithAnimals);UnlockSpell(Shout_SpeakWithAnimals_PrimalAwareness)"

new entry "UmbralSight_Darkvision"
type "PassiveData"
data "DisplayName" "Umbral Sight"
data "Description" "You gain darkvision out to a range of 12m. If you already have darkvision from your race, its range increases to 24m."
data "Boosts" "IF(not HasPassive('Darkvision',context.Source)):DarkvisionRangeMin(12);IF(not HasPassive('Darkvision',context.Source)):ActiveCharacterLight(233033a1-b43a-4ad9-976a-8a062b345e21);IF(HasPassive('Darkvision',context.Source)):DarkvisionRangeMin(24)"

new entry "UmbralSight_Advantage"
type "PassiveData"
data "DisplayName" "Umbral Sight"
data "Description" "You are adept at evading creatures that rely on darkvision. While in darkness, any creatures that can see you with darkvision in that darkness have disadvantage to hit, and you have advantage to hit them"
data "Boosts" "IF(HasPassive('Darkvision',context.Target) and HasObscuredState(ObscuredState.HeavilyObscured) and HasLosToStatusSource()):Disadvantage(AttackTarget);IF(HasPassive('Darkvision',context.Target) and HasObscuredState(ObscuredState.HeavilyObscured) and HasLosToStatusSource()):Advantage(AttackRoll)"